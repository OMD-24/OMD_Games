<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Red Light Green Light</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .player-body::after {
        content: "456";
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        font-weight: bold;
        color: white;
        font-size: 0.75rem;
      }
    </style>
  </head>
  <body
    class="bg-gradient-to-br from-sky-300 to-green-200 min-h-screen overflow-hidden select-none"
  >
    <!-- Doll -->
    <div class="doll-container text-center mt-4">
      <img
        id="dollImage"
        src="./images/back.png"
        alt="Doll"
        class="w-28 mx-auto transition-transform duration-500"
      />
    </div>

    <div
      id="instructions"
      class="fixed inset-0 bg-black bg-opacity-90 text-white p-6 rounded-lg max-w-md mx-auto my-auto text-center z-50"
    >
      <h3 class="text-red-500 text-2xl mb-4">Red Light, Green Light</h3>
      <p><strong>Rules:</strong></p>
      <p>
        üü¢ <strong>Green Light:</strong> Move forward using arrow keys or
        buttons
      </p>
      <p>
        üî¥ <strong>Red Light:</strong> STOP! Don't move or you're eliminated
      </p>
      <p><strong>Goal:</strong> Reach the finish line (top of screen)</p>
      <p>
        <strong>Warning:</strong> The doll can see ANY movement during red
        light!
      </p>
      <button
        onclick="startGame()"
        class="mt-4 bg-green-600 px-5 py-2 text-white rounded-lg hover:bg-green-700"
      >
        Start Game
      </button>
    </div>

    <div
      class="absolute top-5 left-5 bg-black bg-opacity-80 text-white p-4 rounded-xl z-50"
    >
      <div class="flex items-center gap-2">
        <span
          id="lightIndicator"
          class="w-5 h-5 rounded-full bg-gray-400"
        ></span>
        <span id="gameStatus">Ready to Start</span>
      </div>
      <div class="mt-2">Time Left: <span id="timer">45.6</span>s</div>
    </div>

    <div
      class="absolute bottom-5 right-5 bg-black bg-opacity-80 text-white p-4 rounded-xl z-50 w-56"
    >
      <div>Progress to Finish Line</div>
      <div class="w-full h-4 bg-gray-700 rounded mt-2">
        <div id="progressFill" class="h-full bg-green-500 rounded w-0"></div>
      </div>
      <div id="progressText" class="text-xs mt-1">0%</div>
    </div>

    <!-- Player 1 -->
    <div id="player1" class="absolute bottom-12 left-1/3 -translate-x-1/2 z-10">
      <div
        class="player-head w-7 h-7 bg-yellow-300 rounded-full mx-auto border border-yellow-600"
      ></div>
      <div
        class="player-body relative w-6 h-10 bg-green-700 mx-auto mt-1 rounded shadow-inner"
      ></div>
    </div>

    <!-- Player 2 -->
    <div id="player2" class="absolute bottom-12 left-2/3 -translate-x-1/2 z-10">
      <div
        class="player-head w-7 h-7 bg-yellow-300 rounded-full mx-auto border border-yellow-600"
      ></div>
      <div
        class="player-body relative w-6 h-10 bg-blue-700 mx-auto mt-1 rounded shadow-inner"
      ></div>
    </div>

    <div
      class="absolute bottom-5 left-5 bg-black bg-opacity-80 text-white p-4 rounded-xl z-50"
    >
      <div>Controls:</div>
      <div class="text-xs mt-2">Player 1: W A S D | Player 2: Arrow Keys</div>
      <div class="flex flex-col gap-2 mt-2">
        <div class="flex gap-2">
          <button
            data-player="player1"
            data-dir="up"
            class="control-btn bg-blue-500 text-white px-3 py-1 rounded"
          >
            W
          </button>
          <button
            data-player="player1"
            data-dir="left"
            class="control-btn bg-blue-500 text-white px-3 py-1 rounded"
          >
            A
          </button>
          <button
            data-player="player1"
            data-dir="down"
            class="control-btn bg-blue-500 text-white px-3 py-1 rounded"
          >
            S
          </button>
          <button
            data-player="player1"
            data-dir="right"
            class="control-btn bg-blue-500 text-white px-3 py-1 rounded"
          >
            D
          </button>
        </div>
        <div class="flex gap-2">
          <button
            data-player="player2"
            data-dir="up"
            class="control-btn bg-green-500 text-white px-3 py-1 rounded"
          >
            ‚Üë
          </button>
          <button
            data-player="player2"
            data-dir="left"
            class="control-btn bg-green-500 text-white px-3 py-1 rounded"
          >
            ‚Üê
          </button>
          <button
            data-player="player2"
            data-dir="down"
            class="control-btn bg-green-500 text-white px-3 py-1 rounded"
          >
            ‚Üì
          </button>
          <button
            data-player="player2"
            data-dir="right"
            class="control-btn bg-green-500 text-white px-3 py-1 rounded"
          >
            ‚Üí
          </button>
        </div>
      </div>
    </div>

    <div
      id="gameOver"
      class="fixed inset-0 hidden items-center justify-center bg-black bg-opacity-90 text-white z-[1000]"
    >
      <div class="text-center">
        <h2 class="text-4xl text-red-500 font-bold mb-4">ELIMINATED!</h2>
        <p>The doll saw you moving during red light!</p>
        <p id="finalStats"></p>
        <button
          onclick="restartGame()"
          class="mt-4 bg-red-600 px-6 py-2 rounded hover:bg-red-700"
        >
          Try Again
        </button>
      </div>
    </div>

    <div
      id="victory"
      class="fixed inset-0 hidden items-center justify-center bg-gradient-to-br from-yellow-400 to-orange-400 text-black z-[1000]"
    >
      <div class="text-center">
        <h2 class="text-4xl font-bold text-green-700 animate-pulse mb-4">
          CONGRATULATIONS!
        </h2>
        <p>You survived the game!</p>
        <p id="victoryStats"></p>
        <button
          onclick="restartGame()"
          class="mt-4 bg-green-600 px-6 py-2 rounded hover:bg-green-700 text-white"
        >
          Play Again
        </button>
      </div>
    </div>

    <script src="game.js" defer></script>
  </body>
</html>
